---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "nios_discovery_vdiscoverytask Resource - nios"
subcategory: "DISCOVERY"
description: |-
  Manages a Vdiscoverytask.
---

# nios_discovery_vdiscoverytask (Resource)

Manages a Vdiscoverytask.

## Example Usage

```terraform
// Create an AWS Vdiscovery task
resource "nios_discovery_vdiscoverytask" "aws_comprehensive" {
  name                                = "AWS-vdiscoverytask"
  driver_type                         = "AWS"
  member                              = "infoblox.172_28_83_140"
  merge_data                          = true
  update_metadata                     = true
  auto_consolidate_cloud_ea           = true
  auto_consolidate_managed_tenant     = false
  auto_consolidate_managed_vm         = true
  private_network_view_mapping_policy = "DIRECT"
  private_network_view                = "default"
  public_network_view_mapping_policy  = "DIRECT"
  public_network_view                 = "default"
  selected_regions                    = "us-east-1"
  sync_child_accounts                 = true
  multiple_accounts_sync_policy       = "DISCOVER"
  role_arn                            = "arn:aws:iam::123456789012:role/InfobloxDiscoveryRole"
  username                            = "aws-access-key-id"
  password                            = "aws-secret-access-key"
  update_dns_view_private_ip          = true
  dns_view_private_ip                 = "default"
  update_dns_view_public_ip           = true
  dns_view_public_ip                  = "default"
  auto_create_dns_record              = true
  auto_create_dns_hostname_template   = "$${vm_name}.domain.com"
  auto_create_dns_record_type         = "A_PTR_RECORD"
  enable_filter                       = true
  network_filter                      = "INCLUDE"
  network_list                        = ["10.0.0.0/8", "172.16.0.0/12", "192.168.0.0/16"]
  comment                             = "Example AWS Vdiscovery Task"
  enabled                             = true
}

// Create an Azure Vdiscovery task
resource "nios_discovery_vdiscoverytask" "azure_vdiscoverytask" {
  name                                = "AZURE-vdiscoverytask"
  driver_type                         = "AZURE"
  member                              = "infoblox.172_28_83_29"
  username                            = "azure_client_id"
  password                            = "azure_client_secret"
  fqdn_or_ip                          = "tenant_id"
  auto_consolidate_cloud_ea           = true
  auto_consolidate_managed_tenant     = true
  auto_consolidate_managed_vm         = true
  merge_data                          = true
  update_metadata                     = false
  private_network_view_mapping_policy = "AUTO_CREATE"
  public_network_view_mapping_policy  = "AUTO_CREATE"
}

// Create a VMware Vdiscovery task
resource "nios_discovery_vdiscoverytask" "vmware_vdiscoverytask" {
  name                                = "VMWARE-vdiscoverytask"
  driver_type                         = "VMWARE"
  member                              = "infoblox.172_28_83_29"
  fqdn_or_ip                          = "10.0.0.0"
  username                            = "vc_admin"
  password                            = "vmware_password"
  protocol                            = "HTTPS"
  port                                = 443
  allow_unsecured_connection          = true
  auto_consolidate_cloud_ea           = true
  auto_consolidate_managed_tenant     = true
  auto_consolidate_managed_vm         = true
  merge_data                          = true
  update_metadata                     = false
  private_network_view_mapping_policy = "AUTO_CREATE"
  public_network_view_mapping_policy  = "AUTO_CREATE"
}

//Create an OpenStack Vdiscovery task
resource "nios_discovery_vdiscoverytask" "openstack_vdiscoverytask" {
  name                                = "OPENSTACK-vdiscoverytask"
  driver_type                         = "OPENSTACK"
  member                              = "infoblox.172_28_83_29"
  fqdn_or_ip                          = "10.15.0.0"
  username                            = "openstack_user"
  password                            = "openstack_password"
  protocol                            = "HTTP"
  port                                = 80
  identity_version                    = "KEYSTONE_V2"
  use_identity                        = true
  auto_consolidate_cloud_ea           = true
  auto_consolidate_managed_tenant     = true
  auto_consolidate_managed_vm         = true
  merge_data                          = true
  update_metadata                     = false
  private_network_view_mapping_policy = "AUTO_CREATE"
  public_network_view_mapping_policy  = "AUTO_CREATE"
}

//Create a GCP Vdiscovery task
resource "nios_discovery_vdiscoverytask" "gcp_vdiscoverytask" {
  name                                = "GCP-vdiscoverytask"
  driver_type                         = "GCP"
  member                              = "infoblox.172_28_83_140"
  service_account_file                = "/Users/travisuryavamshi/go/src/github.com/infobloxopen/terraform-provider-nios/internal/testdata/nios_discovery_vdiscoverytask/service_account_file1.json"
  cdiscovery_file                     = "/Users/travisuryavamshi/go/src/github.com/infobloxopen/terraform-provider-nios/internal/testdata/nios_discovery_vdiscoverytask/cdiscoveryfile_gcp.csv"
  multiple_accounts_sync_policy       = "UPLOAD"
  sync_child_accounts                 = true
  merge_data                          = false
  update_metadata                     = true
  auto_consolidate_cloud_ea           = true
  auto_consolidate_managed_tenant     = true
  auto_consolidate_managed_vm         = false
  private_network_view_mapping_policy = "AUTO_CREATE"
  public_network_view_mapping_policy  = "AUTO_CREATE"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `auto_consolidate_cloud_ea` (Boolean) Whether to insert or update cloud EAs with discovery data.
- `auto_consolidate_managed_tenant` (Boolean) Whether to replace managed tenant with discovery tenant data.
- `auto_consolidate_managed_vm` (Boolean) Whether to replace managed virtual machine with discovery vm data.
- `driver_type` (String) Type of discovery driver.
- `member` (String) Member on which cloud discovery will be run.
- `merge_data` (Boolean) Whether to replace the old data with new or not.
- `name` (String) Name of this cloud discovery task. Uniquely identify a task.
- `private_network_view_mapping_policy` (String) Mapping policy for the network view for private IPs in discovery data.
- `public_network_view_mapping_policy` (String) Mapping policy for the network view for public IPs in discovery data.

### Optional

- `allow_unsecured_connection` (Boolean) Allow unsecured connection over HTTPS and bypass validation of the remote SSL certificate.
- `auto_create_dns_hostname_template` (String) Template string used to generate host name.
- `auto_create_dns_record` (Boolean) Control whether to create or update DNS record using discovered data.
- `auto_create_dns_record_type` (String) Indicates the type of record to create if the auto create DNS record is enabled.
- `cdiscovery_file` (String) The path to a file containing AWS account IDs or GCP Project IDs. when multiple_accounts_sync_policy is set to UPLOAD.
- `cdiscovery_file_token` (String) The AWS account IDs or GCP Project IDs file's token.
- `comment` (String) Comment on the task.
- `credentials_type` (String) Credentials type used for connecting to the cloud management platform.
- `dns_view_private_ip` (String) The DNS view name for private IPs.
- `dns_view_public_ip` (String) The DNS view name for public IPs.
- `domain_name` (String) The name of the domain to use with keystone v3.
- `enable_filter` (Boolean) Enable filter for cloud discovery task
- `enabled` (Boolean) Whether to enabled the cloud discovery or not.
- `fqdn_or_ip` (String) FQDN or IP of the cloud management platform.
- `govcloud_enabled` (Boolean) Indicates if gov cloud is enabled or disabled.
- `identity_version` (String) Identity service version.
- `multiple_accounts_sync_policy` (String) Discover all child accounts or Upload child account ids to discover..
- `network_filter` (String) Options to filter the networks in cdiscovery task.
- `network_list` (List of String) List of networks to filter in cdiscovery task.
- `password` (String) Password used for connecting to the cloud management platform.
- `port` (Number) Connection port used for connecting to the cloud management platform.
- `private_network_view` (String) Network view for private IPs.
- `protocol` (String) Connection protocol used for connecting to the cloud management platform.
- `public_network_view` (String) Network view for public IPs.
- `role_arn` (String) Role ARN for syncing child accounts; maximum 128 characters.
- `scheduled_run` (Attributes) (see [below for nested schema](#nestedatt--scheduled_run))
- `selected_regions` (String) String containing selected regions for discovery in comma separated format.
- `service_account_file` (String) The service_account_file for GCP.
- `service_account_file_token` (String) Service account file's token.
- `sync_child_accounts` (Boolean) Synchronizing child accounts is enabled or disabled.
- `update_dns_view_private_ip` (Boolean) If set to true, the appliance uses a specific DNS view for private IPs.
- `update_dns_view_public_ip` (Boolean) If set to true, the appliance uses a specific DNS view for public IPs.
- `update_metadata` (Boolean) Whether to update metadata as a result of this network discovery.
- `use_identity` (Boolean) If set true, all keystone connection will use "/identity" endpoint and port value will be ignored.
- `username` (String) Username used for connecting to the cloud management platform.

### Read-Only

- `accounts_list` (List of String) The AWS Account IDs or GCP Project IDs list associated with this task.
- `last_run` (Number) Timestamp of last run.
- `ref` (String) The reference to the object.
- `state` (String) Current state of this task.
- `state_msg` (String) State message of the complete discovery process.

<a id="nestedatt--scheduled_run"></a>
### Nested Schema for `scheduled_run`

Optional:

- `day_of_month` (Number) The day of the month for the scheduled task.
- `disable` (Boolean) If set to True, the scheduled task is disabled.
- `every` (Number) The number of frequency to wait before repeating the scheduled task.
- `frequency` (String) The frequency for the scheduled task.
- `hour_of_day` (Number) The hour of day for the scheduled task.
- `minutes_past_hour` (Number) The minutes past the hour for the scheduled task.
- `month` (Number) The month for the scheduled task.
- `recurring_time` (Number) The recurring time for the schedule in Epoch seconds format. This field is obsolete and is preserved only for backward compatibility purposes. Please use other applicable fields to define the recurring schedule. DO NOT use recurring_time together with these fields. If you use recurring_time with other fields to define the recurring schedule, recurring_time has priority over year, hour_of_day, and minutes_past_hour and will override the values of these fields, although it does not override month and day_of_month. In this case, the recurring time value might be different than the intended value that you define.
- `repeat` (String) Indicates if the scheduled task will be repeated or run only once.
- `time_zone` (String) The time zone for the schedule.
- `weekdays` (List of String) Days of the week when scheduling is triggered.
- `year` (Number) The year for the scheduled task.
