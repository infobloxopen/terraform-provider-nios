---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "nios_dtc_pool Resource - nios"
subcategory: "DTC"
description: |-
  Manages a DTC Pool
---

# nios_dtc_pool (Resource)

Manages a DTC Pool

## Example Usage

```terraform
// Create a DTC pool with basic fields 
resource "nios_dtc_pool" "dtc_pool1" {
  name                = "dtc_pool"
  lb_preferred_method = "ROUND_ROBIN"
}

// Create DTC Server (Required as Parent)
resource "nios_dtc_server" "dtc_server_1" {
  name = "example-server-for-pool1.com"
  host = "2.3.3.4"
}

resource "nios_dtc_server" "dtc_server_2" {
  name = "example-server-for-pool2.com"
  host = "2.3.3.4"
}

// Create a DTC pool with additional fields
resource "nios_dtc_pool" "dtc_pool2" {
  name                = "dtc_pool2"
  lb_preferred_method = "TOPOLOGY"
  // The topology ruleset used here must have any one of the server members configured in its topology members
  lb_preferred_topology = "dtc:topology/ZG5zLmlkbnNfdG9wb2xvZ3kkdG9wb2xvZ3lfcnVsZXNldA:topology_ruleset"
  comment               = "DTC pool creation"
  extattrs = {
    Site = "location-1"
  }
  servers = [
    {
      server = nios_dtc_server.dtc_server_1.ref
      ratio  = 34
    },
    {
      server = nios_dtc_server.dtc_server_2.ref
      ratio  = 55
    }
  ]
  monitors            = ["dtc:monitor:http/ZG5zLmlkbnNfbW9uaXRvcl9odHRwJGh0dHA:http", "dtc:monitor:snmp/ZG5zLmlkbnNfbW9uaXRvcl9zbm1wJHNubXA:snmp"]
  lb_alternate_method = "DYNAMIC_RATIO"
  lb_dynamic_ratio_alternate = {
    method                = "ROUND_TRIP_DELAY"
    monitor_weighing      = "RATIO"
    invert_monitor_metric = true
    //OID must (0.2) must be configured on the SNMP monitor used
    monitor        = "dtc:monitor:snmp/ZG5zLmlkbnNfbW9uaXRvcl9zbm1wJHNubXA:snmp"
    monitor_metric = ".2"
  }
  auto_consolidated_monitors = true
  disable                    = false
  availability               = "QUORUM"
  quorum                     = 1
  ttl                        = 23
  use_ttl                    = true
}

//  Create a DTC pool with consolidated monitors 
// Steps:
// Create a DTC pool without consolidated monitors 
// Associate the DTC pool with a DTC LBDN that has a zone with infoblox.localdomain member 
// Update this DTC pool to add consolidated monitors 
// Pre-requisite: A DTC LBDN with a zone that has infoblox.localdomain as member should exist and the pool should be associated with that LBDN
resource "nios_dtc_pool" "dtc_pool3" {
  name                = "dtc_pool3"
  lb_preferred_method = "ROUND_ROBIN"
  monitors            = ["dtc:monitor:http/ZG5zLmlkbnNfbW9uaXRvcl9odHRwJGh0dHA:http", "dtc:monitor:snmp/ZG5zLmlkbnNfbW9uaXRvcl9zbm1wJHNubXA:snmp"]
  consolidated_monitors = [
    {
      monitor                   = "dtc:monitor:http/ZG5zLmlkbnNfbW9uaXRvcl9odHRwJGh0dHA:http"
      members                   = ["infoblox.localdomain"]
      availability              = "ALL"
      full_health_communication = true
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `lb_preferred_method` (String) The preferred load balancing method. Use this to select a method type from the pool.
- `name` (String) The DTC Pool display name.

### Optional

- `auto_consolidated_monitors` (Boolean) Flag for enabling auto managing DTC Consolidated Monitors in DTC Pool.
- `availability` (String) A resource in the pool is available if ANY, at least QUORUM, or ALL monitors for the pool say that it is up.
- `comment` (String) The comment for the DTC Pool; maximum 256 characters.
- `consolidated_monitors` (Attributes List) List of monitors and associated members statuses of which are shared across members and consolidated in server availability determination. (see [below for nested schema](#nestedatt--consolidated_monitors))
- `disable` (Boolean) Determines whether the DTC Pool is disabled or not. When this is set to False, the fixed address is enabled.
- `extattrs` (Map of String) Extensible attributes associated with the object.
- `lb_alternate_method` (String) The alternate load balancing method. Use this to select a method type from the pool if the preferred method does not return any results.
- `lb_alternate_topology` (String) The alternate topology for load balancing.
- `lb_dynamic_ratio_alternate` (Attributes) The DTC Pool settings for dynamic ratio when its selected as alternate method. (see [below for nested schema](#nestedatt--lb_dynamic_ratio_alternate))
- `lb_dynamic_ratio_preferred` (Attributes) The DTC Pool settings for dynamic ratio when its selected as preferred method. (see [below for nested schema](#nestedatt--lb_dynamic_ratio_preferred))
- `lb_preferred_topology` (String) The preferred topology for load balancing.
- `monitors` (List of String) The monitors related to pool.
- `quorum` (Number) For availability mode QUORUM, at least this many monitors must report the resource as up for it to be available
- `servers` (Attributes List) The servers related to the pool. (see [below for nested schema](#nestedatt--servers))
- `ttl` (Number) The Time To Live (TTL) value for the DTC Pool. A 32-bit unsigned integer that represents the duration, in seconds, for which the record is valid (cached). Zero indicates that the record should not be cached.
- `use_ttl` (Boolean) Flag to indicate whether the TTL value should be used for the DTC Pool.

### Read-Only

- `extattrs_all` (Map of String) Extensible attributes associated with the object , including default attributes.
- `health` (Attributes) The health status of DTC Pool (see [below for nested schema](#nestedatt--health))
- `ref` (String) The reference to the object.

<a id="nestedatt--consolidated_monitors"></a>
### Nested Schema for `consolidated_monitors`

Optional:

- `availability` (String) Servers assigned to a pool with monitor defined are healthy if ANY or ALL members report healthy status.
- `full_health_communication` (Boolean) Flag for switching health performing and sharing behavior to perform health checks on each DTC grid member that serves related LBDN(s) and send them across all DTC grid members from both selected and non-selected lists.
- `members` (List of String) Members whose monitor statuses are shared across other members in a pool.
- `monitor` (String) Monitor whose statuses are shared across other members in a pool.


<a id="nestedatt--lb_dynamic_ratio_alternate"></a>
### Nested Schema for `lb_dynamic_ratio_alternate`

Optional:

- `invert_monitor_metric` (Boolean) Determines whether the inverted values of the DTC SNMP monitor metric will be used.
- `method` (String) The method of the DTC dynamic ratio load balancing.
- `monitor` (String) The DTC monitor output of which will be used for dynamic ratio load balancing.
- `monitor_metric` (String) The metric of the DTC SNMP monitor that will be used for dynamic weighing.
- `monitor_weighing` (String) The DTC monitor weight. 'PRIORITY' means that all clients will be forwarded to the least loaded server. 'RATIO' means that distribution will be calculated based on dynamic weights.


<a id="nestedatt--lb_dynamic_ratio_preferred"></a>
### Nested Schema for `lb_dynamic_ratio_preferred`

Optional:

- `invert_monitor_metric` (Boolean) Determines whether the inverted values of the DTC SNMP monitor metric will be used.
- `method` (String) The method of the DTC dynamic ratio load balancing.
- `monitor` (String) The DTC monitor output of which will be used for dynamic ratio load balancing.
- `monitor_metric` (String) The metric of the DTC SNMP monitor that will be used for dynamic weighing.
- `monitor_weighing` (String) The DTC monitor weight. 'PRIORITY' means that all clients will be forwarded to the least loaded server. 'RATIO' means that distribution will be calculated based on dynamic weights.


<a id="nestedatt--servers"></a>
### Nested Schema for `servers`

Required:

- `server` (String) The server to link with.

Optional:

- `ratio` (Number) The weight of server.


<a id="nestedatt--health"></a>
### Nested Schema for `health`

Read-Only:

- `availability` (String) The availability color status.
- `description` (String) The textual description of the object's status.
- `enabled_state` (String) The enabled state of the object.
